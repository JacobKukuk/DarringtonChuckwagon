<!DOCTYPE html>
<html>
<body>


    <script>

        var data = null;
        var xhr = new XMLHttpRequest();

        xhr.addEventListener("readystatechange", function () {
            if (this.readyState === this.DONE) {
                //console.log(this.responseText);
            }
        });

        xhr.open("GET", "https://apiv4.ordering.co/v400/en/darringtonchuckwagon/orders?mode=dashboard");
        xhr.setRequestHeader("x-api-key", "zaRtscl2DyYx-ZnY8IHPj6KaMpjuYD-2777nokU9Y3HCDYJ1gimsMBQFLVQGjRxdJ");

        xhr.send(data);

        xhr.onload = function () {

            var posts = JSON.parse(xhr.responseText);

            for (orderid in posts.result) {
                //document.write(posts.result[orderid].status + ', ');

                if (posts.result[orderid].status == 0) {
                    document.write(posts.result[orderid].id);
                    changeorder(posts.result[orderid].id);

                }

            }
            
        };


        function changeorder(orderid) {
            var data = "{\"status\":7}";

            var xhr = new XMLHttpRequest();

            xhr.addEventListener("readystatechange", function () {
                if (this.readyState === this.DONE) {
                    //console.log(this.responseText);
                }
            });

            xhr.open("PUT", "https://apiv4.ordering.co/v400/en/darringtonchuckwagon/orders/" + orderid);
            xhr.setRequestHeader("content-type", "application/json");
            xhr.setRequestHeader("x-api-key", "zaRtscl2DyYx-ZnY8IHPj6KaMpjuYD-2777nokU9Y3HCDYJ1gimsMBQFLVQGjRxdJ");

            xhr.send(data);
        }


    </script>
</body>
</html>
